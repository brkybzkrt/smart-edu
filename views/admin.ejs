<%- include('partials/_header.ejs') %>

    
	<%- include('partials/_nav') %>
	


<% if(user.role==='Admin') {%>
    <div class="all-title-box">
        <div class="container text-center">
            <h1><%=user.name%><span class="m_1">ADMÄ°N</span></h1>
        </div>
    </div>


    <div id="overviews" class="section wb">
        <div class="container">
            <div class="row"> 
                <div class="col-lg-12 blog-post-single">					
                    <div class="blog-author">
                        <div class="author-bio">
                            <h3 class=""></h3>
                            
                        
                        </div>
                        
                    </div>

                </div><!-- end col -->
            </div><!-- end row -->
            <div class="row mt-5"> 
                <h2>Users</h2>
                <table class="table">
                    <thead>
                      <tr>
                        <th scope="col">#</th>
                        <th scope="col">Name</th>
                        <th scope="col">Email</th>
                        <th scope="col">Role</th>
                        <th scope="col">Delete</th>
                      </tr>
                    </thead>
                    <tbody>
                        <% for(let i =0;i<users.length;i++) {%>
                      <tr>
                        <th scope="row"><%=i+1%></th>
                        <td><%= users[i].name%></td>
                        <td><%= users[i].email%></td>
                        <td><%= users[i].role%></td>
                        <td> <a href="/admin/userDelete/<%= users[i]._id%>?_method=DELETE" class="btn btn-danger <%=users[i].role==='Admin' && 'disabled' %>" onclick="return confirm('are you sure')" >Delete</a></td>
                      </tr>
                     <%}%>
                    </tbody>
                  </table>
            </div><!-- end row -->


            <div class="row mt-5"> 
                <h2>Categories</h2>
                <table class="table">
                    <thead>
                      <tr>
                        <th scope="col">#</th>
                        <th scope="col">Title</th>
                        <th scope="col">Slug</th>
                        <th scope="col">Update</th>
                        <th scope="col">Delete</th>
                      </tr>
                    </thead>
                    <tbody>
                        <% for(let i =0;i<categories.length;i++) {%>
                      <tr>
                        <th scope="row"><%=i+1%></th>
                        <td><%= categories[i].title%></td>
                        <td><%= categories[i].slug%></td>
                        <td> <button  data-target="#updateCategory<%= categories[i]._id %>" data-toggle="modal" class="btn btn-primary ">Update</button></td>
                        <td> <a href="/admin/categoriesDelete/<%= categories[i]._id%>?_method=DELETE" class="btn btn-danger " onclick="return confirm('are you sure')" >Delete</a></td>
                      </tr>

                      <!--CATEGORY UPDATE MODAL-->
                      <div class="modal fade" id="updateCategory<%= categories[i]._id %>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                            <div class="modal-content">
                                <div class="modal-body customer-box">
                                    <!-- Tab panes -->
                                    <div class="tab-content">
                                        <div class="tab-pane active" >
                                            <form method="POST" action="/admin/categoriesUpdate/<%= categories[i]._id%>?_method=PUT" class="form-horizontal">
                                                <div class="form-group">
                                                    <div class="col-sm-12">
                                                        <input type="text" name="title" value="<%= categories[i].title %>" class="form-control"  placeholder="Course Name">
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <div class="col-sm-12">
                                                        <input type="hidden" name="role" class="form-control"  value="<%= user.role %>">
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-sm-10">
                                                        <button type="submit" class="btn btn-light btn-radius btn-brd grd1">
                                                            Submit
                                                        </button>
                                                        <button type="submit" class="btn btn-light btn-radius btn-brd grd1"
                                                            data-dismiss="modal" aria-hidden="true">
                                                            Cancel
                                                        </button>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                     <%}%>

                    

                    </tbody>
                  </table>
            </div><!-- end row -->
        </div><!-- end container -->
    </div><!-- end section -->

<%   } %>

<%- include('partials/_footer') %>
